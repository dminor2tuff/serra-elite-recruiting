<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Serra Football Prospects</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&display=swap" rel="stylesheet">

<style>
  body {
    margin: 0;
    font-family: Montserrat, sans-serif;
    background: radial-gradient(circle at top, #7b0f0f 0, #3a0407 60%, #120104 100%);
    color: #fff;
  }
  nav {
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:14px 26px;
  }
  nav img {height:60px;}
  nav a {
    color:#fff;
    text-decoration:none;
    margin-left:18px;
    font-weight:600;
  }
  h1 {
    padding:20px 26px 10px;
    margin:0;
    font-size:30px;
    font-weight:800;
  }
  .top-bar {
    display:flex;
    align-items:center;
    flex-wrap:wrap;
    gap:12px;
    padding:0 26px 6px;
  }
  .search {
    padding:10px 12px;
    border-radius:10px;
    border:none;
    min-width:260px;
  }
  .filters {
    display:flex;
    gap:10px;
    padding:0 26px 20px;
    flex-wrap:wrap;
  }
  .filter-btn {
    padding:8px 16px;
    border-radius:20px;
    background:#b30000;
    border:none;
    color:#fff;
    cursor:pointer;
    font-weight:600;
  }
  .filter-btn.active {
    background:#fff;
    color:#b30000;
  }
  .grid {
    display:grid;
    grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
    gap:20px;
    padding:0 26px 40px;
  }
  .card {
    background:rgba(0,0,0,0.35);
    border-radius:18px;
    border:1px solid rgba(255,255,255,0.18);
    padding:16px;
    text-align:center;
  }
  .card img {
    width:100%;
    height:240px;
    object-fit:cover;
    border-radius:14px;
    background:#190205;
  }
  .card h3 {margin:10px 0 4px;font-size:18px;}
  .card p {margin:3px 0;font-size:14px;}
  .badge-row {margin-top:6px;font-size:12px;opacity:.9;}
  .btn {
    display:inline-block;
    margin-top:10px;
    padding:8px 14px;
    background:#fff;
    color:#b30000;
    border-radius:10px;
    text-decoration:none;
    font-weight:600;
  }
  footer {
    text-align:center;
    padding:20px;
    font-size:13px;
    opacity:.8;
  }
</style>
</head>

<body>

<nav>
  <img src="images/serra_logo.png" alt="Serra Logo">
  <div>
    <a href="index.html">Home</a>
    <a href="recruits.html">Recruits</a>
    <a href="transcript.html">Transcript Request</a>
    <a href="coach-tools.html">Coach Tools</a>
  </div>
</nav>

<h1>Serra Football Prospects</h1>

<div class="top-bar">
  <input id="searchBox" class="search" placeholder="Search by name, position, or attribute‚Ä¶">
</div>

<div class="filters">
  <button class="filter-btn active" data-class="All">All</button>
  <button class="filter-btn" data-class="2026">2026</button>
  <button class="filter-btn" data-class="2027">2027</button>
  <button class="filter-btn" data-class="2028">2028</button>
  <button class="filter-btn" data-class="2029">2029</button>
</div>

<div id="playerGrid" class="grid"></div>

<footer>
  Follow Serra Football ‚Äî üê¶ @serra_football &nbsp;|&nbsp; üì∏ @serrafootball
</footer>

<script>
const CSV_URL =
 "https://docs.google.com/spreadsheets/d/e/2PACX-1vRZdfePIY8K8ag6AePllWRgYXhjJ-gJddB_8rDaJi3t5BAT11bHVK6m5cDsDQXg2PUIYPqHYcXyxbT2/pub?output=csv";

let players = [];
let activeClass = "All";

function parseCSV(text) {
  const rows = text.trim().split("\n").slice(1);
  return rows.map(row => {
    const cols = row.match(/(".*?"|[^",\s]+)(?=\s*,|\s*$)/g);
    if (!cols || cols.length < 13) return null;
    const clean = c => c ? c.replace(/"/g,"").trim() : "";
    return {
      Name: clean(cols[0]),
      Class: clean(cols[1]),
      Position: clean(cols[2]),
      HeightWeight: clean(cols[3]),
      Hudl: clean(cols[4]),
      Bio: clean(cols[5]),
      Image: clean(cols[6]),
      Twitter: clean(cols[7]),
      GPA: clean(cols[8]),
      Offers: clean(cols[9]),
      Status: clean(cols[10]),
      College: clean(cols[11]),
      CollegeLogo: clean(cols[12])
    };
  }).filter(Boolean);
}

fetch(CSV_URL)
  .then(r => r.text())
  .then(text => {
    if (text.includes("<html")) {
      alert("CSV LINK IS WRONG ‚Äî must end in /pub?output=csv");
      return;
    }
    players = parseCSV(text);
    render();
  });

function render() {
  const grid = document.getElementById("playerGrid");
  const search = document.getElementById("searchBox").value.toLowerCase();
  grid.innerHTML = "";

  players
    .filter(p =>
      (activeClass === "All" || p.Class === activeClass) &&
      (p.Name.toLowerCase().includes(search) ||
       p.Position.toLowerCase().includes(search) ||
       p.Bio.toLowerCase().includes(search))
    )
    .forEach(p => {
      const img = p.Image && p.Image.startsWith("http")
        ? p.Image
        : "images/placeholder_player.png";

      grid.innerHTML += `
        <div class="card">
          <img src="${img}" alt="${p.Name}">
          <h3>${p.Name}</h3>
          <p>${p.Position} ‚Ä¢ Class of ${p.Class}</p>
          <p>${p.HeightWeight}</p>
          <p>GPA: ${p.GPA || "N/A"}</p>
          <div class="badge-row">
            ${p.Status ? `<span><strong>Status:</strong> ${p.Status}</span><br>` : ""}
            ${p.Offers ? `<span><strong>Offers:</strong> ${p.Offers}</span>` : ""}
          </div>
          ${p.Twitter ? `<p><a href="${p.Twitter}" target="_blank">üê¶ Twitter / X</a></p>` : ""}
          <a class="btn" href="profile.html?name=${encodeURIComponent(p.Name)}">View Profile</a>
        </div>
      `;
    });
}

document.getElementById("searchBox").addEventListener("input", render);

document.querySelectorAll(".filter-btn").forEach(btn => {
  btn.addEventListener("click", () => {
    document.querySelectorAll(".filter-btn").forEach(b => b.classList.remove("active"));
    btn.classList.add("active");
    activeClass = btn.dataset.class;
    render();
  });
});
</script>

</body>
</html>