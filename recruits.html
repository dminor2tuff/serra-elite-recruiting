<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Serra Recruits</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="styles.css">
</head>

<body>

<nav>
  <img src="images/serra_logo.png">
  <div>
    <a href="index.html">Home</a>
  </div>
</nav>

<div class="section" id="lock">
  <h2>Restricted Access</h2>
  <input type="password" id="pw" placeholder="Enter password">
  <button onclick="unlock()">Enter</button>
</div>

<div class="section" id="content" style="display:none">
  <h2>Recruiting Board</h2>
  <div id="list"></div>
</div>

<script>
const CODE="SerraFB";
const SHEET="https://docs.google.com/spreadsheets/d/e/2PACX-1vRZdfePIY8K8ag6AePllWRgYXhjJ-gJddB_8rDaJi3t5BAT11bHVK6m5cDsDQXg2PUIYPqHYcXyxbT2/pub?output=csv";

function unlock(){
  if(pw.value===CODE){
    lock.style.display="none";
    content.style.display="block";
    load();
  }
}

function load(){
fetch(SHEET).then(r=>r.text()).then(csv=>{
  const rows=csv.split("\n");
  let html="";
  rows.slice(1).forEach(r=>{
    const c=r.split(",");
    if(c[0])
      html+=`<div class="card"><a href="profile.html?name=${encodeURIComponent(c[0])}">${c[0]}</a></div>`;
  });
  list.innerHTML=html;
});
}
</script>

</body>
</html>