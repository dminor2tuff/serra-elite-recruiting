<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Serra Football Recruits</title>
<link rel="stylesheet" href="styles.css">
</head>

<body>

<header class="site-header">
  <a href="index.html">Serra Football Recruiting</a>
</header>

<section class="recruits-container">
  <h1>Serra Football Recruits</h1>
  <div class="recruits-grid" id="grid"></div>
</section>

<script>
const csvURL =
"https://docs.google.com/spreadsheets/d/e/2PACX-1vRZdfePIY8K8ag6AePllWRgYXhjJ-gJddB_8rDaJi3t5BAT11bHVK6m5cDsDQXg2PUIYPqHYcXyxbT2/pub?output=csv";

function slugify(text) {
  return text.toLowerCase()
    .replace(/,/g,"")
    .replace(/\s+/g,"-")
    .replace(/[^a-z0-9-]/g,"");
}

fetch(csvURL)
  .then(res => res.text())
  .then(csv => {
    const rows = csv.split("\n").slice(1);
    const grid = document.getElementById("grid");

    rows.forEach(row => {
      const c = row.split(",");
      if (!c[0]) return;

      const slug = slugify(c[0]);

      grid.innerHTML += `
        <div class="player-card">
          <img class="player-photo"
            src="${c[6]}"
            onerror="this.src='images/placeholder_player.png'">

          <div class="player-name">${c[0]}</div>
          <div class="player-meta">${c[2]}</div>
          <div class="player-meta">Class of ${c[1]} â€¢ ${c[3]}</div>

          <div class="icon-links">
            ${c[4] ? `<a href="${c[4]}" target="_blank">ğŸ¥</a>` : ""}
            ${c[7] ? `<a href="${c[7]}" target="_blank">ğŸ¦</a>` : ""}
          </div>

          <a class="view-profile-btn"
             href="profile.html?player=${slug}">
             View Profile
          </a>
        </div>
      `;
    });
  });
</script>

</body>
</html>