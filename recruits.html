<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Serra Football Prospects</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

<style>
:root {
  --serra-red:#7b1e24;
  --serra-dark:#4f1115;
  --serra-bg:#3a0c10;
}

* { box-sizing:border-box; }

body {
  margin:0;
  font-family:'Inter',sans-serif;
  background:linear-gradient(180deg,#2a070a,#7b1e24);
  color:#fff;
}

header {
  padding:20px 40px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

header img { height:48px; }

header a {
  color:#fff;
  text-decoration:none;
  margin-left:20px;
  font-weight:600;
}

main { padding:40px; }

h1 { font-size:32px;margin-bottom:20px; }

.controls {
  display:flex;
  gap:12px;
  flex-wrap:wrap;
  margin-bottom:30px;
}

.controls input {
  padding:12px;
  border-radius:10px;
  border:none;
  width:260px;
}

.filter-btn {
  background:var(--serra-dark);
  color:#fff;
  border:none;
  padding:10px 18px;
  border-radius:10px;
  cursor:pointer;
  font-weight:600;
}

.filter-btn.active {
  background:#fff;
  color:#4f1115;
}

.grid {
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
  gap:22px;
}

.card {
  background:linear-gradient(180deg,#8c232a,#66181d);
  padding:18px;
  border-radius:18px;
  text-align:center;
  box-shadow:0 10px 25px rgba(0,0,0,.35);
}

.card img {
  width:100%;
  height:260px;
  object-fit:cover;
  border-radius:14px;
  background:#2a070a;
  margin-bottom:12px;
}

.card h3 { margin:8px 0;font-size:20px; }

.card p { margin:4px 0;font-size:14px;opacity:.95; }

.card a {
  display:inline-block;
  margin-top:6px;
  color:#9ad6ff;
  font-weight:600;
  text-decoration:none;
}

.card button {
  margin-top:14px;
  border:none;
  padding:10px 18px;
  border-radius:10px;
  background:#fff;
  color:#4f1115;
  font-weight:700;
  cursor:pointer;
}

footer {
  padding:30px;
  text-align:center;
  opacity:.85;
}
</style>
</head>

<body>

<header>
  <img src="images/serra_logo.png">
  <nav>
    <a href="index.html">Home</a>
    <a href="recruits.html">Recruits</a>
    <a href="transcript.html">Transcript Request</a>
  </nav>
</header>

<main>
<h1>Serra Football Prospects</h1>

<div class="controls">
  <input id="searchInput" placeholder="Search by name or position">
  <button class="filter-btn active" data-class="All">All</button>
  <button class="filter-btn" data-class="2026">2026</button>
  <button class="filter-btn" data-class="2027">2027</button>
  <button class="filter-btn" data-class="2028">2028</button>
  <button class="filter-btn" data-class="2029">2029</button>
</div>

<div id="playerGrid" class="grid"></div>
</main>

<footer>
  Follow Serra Football ‚Ä¢ üê¶ @serra_football ‚Ä¢ üì∏ @serrafootball
</footer>

<script>
const CSV_URL = "PASTE_YOUR_CSV_URL_HERE";

let players = [];
let activeClass = "All";

function parseCSV(text) {
  const rows = text.trim().split("\n").slice(1);
  return rows.map(row => {
    const cols = row.match(/(".*?"|[^",]+)(?=\s*,|\s*$)/g);
    if (!cols || cols.length < 8) return null;
    return {
      name: cols[0].replaceAll('"','').trim(),
      class: cols[1].replaceAll('"','').trim(),
      position: cols[2].replaceAll('"','').trim(),
      heightWeight: cols[3].replaceAll('"','').trim(),
      hudl: cols[4].replaceAll('"','').trim(),
      bio: cols[5].replaceAll('"','').trim(),
      image: cols[6].replaceAll('"','').trim(),
      twitter: cols[7].replaceAll('"','').trim()
    };
  }).filter(Boolean);
}

fetch(CSV_URL)
  .then(r => r.text())
  .then(text => {
    if (text.includes("<html")) {
      alert("CSV LINK IS WRONG ‚Äî must end in /pub?output=csv");
      return;
    }
    players = parseCSV(text);
    render();
  });

function render() {
  const grid = document.getElementById("playerGrid");
  const search = document.getElementById("searchInput").value.toLowerCase();
  grid.innerHTML = "";

  players.filter(p =>
    (activeClass==="All" || p.class===activeClass) &&
    (p.name.toLowerCase().includes(search) ||
     p.position.toLowerCase().includes(search))
  ).forEach(p => {
    const img = p.image.startsWith("http")
      ? p.image
      : "images/placeholder_player.png";

    grid.innerHTML += `
    <div class="card">
      <img src="${img}">
      <h3>${p.name}</h3>
      <p>${p.position} ‚Ä¢ Class of ${p.class}</p>
      <p>${p.heightWeight}</p>
      ${p.twitter ? `<a href="${p.twitter}" target="_blank">üê¶ Twitter / X</a>` : ""}
      <button onclick="profile('${p.name}')">View Profile</button>
    </div>`;
  });
}

function profile(name) {
  window.location.href = "profile.html?player=" + encodeURIComponent(name);
}

document.getElementById("searchInput")
  .addEventListener("input", render);

document.querySelectorAll(".filter-btn").forEach(btn => {
  btn.onclick = () => {
    document.querySelectorAll(".filter-btn")
      .forEach(b => b.classList.remove("active"));
    btn.classList.add("active");
    activeClass = btn.dataset.class;
    render();
  };
});
</script>

</body>
</html>