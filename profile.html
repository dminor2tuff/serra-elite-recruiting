<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Serra Player Profile</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --blue:#002b5c;
  --red:#800000;
  --light:#f5f7fb;
  --pill-bg:#eef1f8;
}
body{margin:0;font-family:Arial;background:var(--light)}<nav style="background:#002b5c;color:white;display:flex;justify-content:space-between;align-items:center;padding:12px 18px;">
  <div>
    <img src="images/serra_logo.png" style="height:36px">
  </div>
  <div>
    <a href="index.html" style="color:white;margin-left:16px;font-weight:700;text-decoration:none;">Home</a>
    <a href="recruits.html" style="color:white;margin-left:16px;font-weight:700;text-decoration:none;">Recruits</a>
    <a href="transcript_request.html" style="color:white;margin-left:16px;font-weight:700;text-decoration:none;">Transcript</a>
    <a href="admin.html" style="color:white;margin-left:16px;font-weight:700;text-decoration:none;">Coach Tools</a>
  </div>
</nav>
.wrap{max-width:900px;margin:30px auto;padding:0 16px}
.card{
  background:white;
  border-radius:18px;
  padding:22px;
  display:flex;
  gap:24px;
  box-shadow:0 4px 14px rgba(0,0,0,.1);
}
.photo img{
  width:220px;
  border-radius:16px;
  object-fit:cover;
}
h1{color:var(--blue);margin-bottom:6px}
.meta{color:#444;margin-bottom:8px}
.back{color:var(--blue);font-weight:700;text-decoration:none}
.badges span{
  display:inline-flex;align-items:center;
  background:var(--pill-bg);
  padding:3px 8px;
  border-radius:999px;
  font-size:.8rem;
  margin-right:6px;
  margin-bottom:4px;
}
.badges img{
  width:18px;height:18px;border-radius:50%;margin-right:5px;object-fit:cover;
}
.actions{margin-top:12px}
.actions button{
  background:var(--blue);
  color:white;
  padding:9px 18px;
  border:none;
  border-radius:999px;
  font-weight:700;
  cursor:pointer;
}
@media print{
  .back,.actions{display:none}
  body{background:white}
}
</style>
</head>

<body>

<div class="wrap">
  <a class="back" href="recruits.html">← Back to recruits</a>

  <div class="card">
    <div class="photo">
      <img id="photo" src="images/placeholder_player.png" alt="Player photo">
    </div>
    <div>
      <h1 id="name">Loading…</h1>
      <div id="meta" class="meta"></div>
      <div id="badges" class="badges"></div>
      <p id="bio"></p>
      <p><a id="hudl" target="_blank"></a></p>
      <div class="actions">
        <button onclick="window.print()">Download PDF</button>
      </div>
    </div>
  </div>
</div>

<script>
const SHEET =
"https://docs.google.com/spreadsheets/d/e/2PACX-1vRZdfePIY8K8ag6AePllWRgYXhjJ-gJddB_8rDaJi3t5BAT11bHVK6m5cDsDQXg2PUIYPqHYcXyxbT2/pub?output=csv";

const PLACEHOLDER="images/placeholder_player.png";
const params=new URLSearchParams(location.search);
const pname=params.get("name");

fetch(SHEET).then(r=>r.text()).then(csv=>{
  const rows=csv.split("\\n").map(r=>r.split(","));
  const headers=rows[0];

  const players=rows.slice(1).map(r=>{
    if(!r[0]) return null;
    const p={};
    headers.forEach((h,i)=>p[h.trim()]=(r[i]||"").trim());
    return p;
  }).filter(Boolean);

  const p=players.find(x=>x.Name===pname);
  if(!p){
    document.getElementById("name").innerText="Player not found";
    return;
  }

  document.getElementById("name").innerText=p.Name;
  document.getElementById("meta").innerText=
    ["Class "+(p.Class||"—"), p.Position, p.HeightWeight]
    .filter(Boolean).join(" • ");

  document.getElementById("bio").innerText=p.Writeup || "";
  document.getElementById("photo").src=p.ImageURL || PLACEHOLDER;

  const hudl=document.getElementById("hudl");
  if(p.HUDL){
    hudl.href=p.HUDL;
    hudl.innerText="View HUDL";
  }else{
    hudl.innerText="";
  }

  const badges=document.getElementById("badges");
  let html="";
  if(p.Status){
    html+=`<span>${p.Status}</span>`;
  }
  if(p.College){
    if(p.CollegeLogoURL){
      html+=`<span><img src="${p.CollegeLogoURL}">${p.College}</span>`;
    }else{
      html+=`<span>${p.College}</span>`;
    }
  }
  if(p.Offers){
    html+=`<span>Offers: ${p.Offers}</span>`;
  }
  badges.innerHTML=html;
});
</script>

</body>
</html>