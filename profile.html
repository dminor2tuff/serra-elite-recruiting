<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Serra Player Profile</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- PASSWORD PROTECTION -->
<script>
if (sessionStorage.getItem("serraCoachAccess") !== "true") {
  window.location.href = "coach-login.html";
}
</script>

<!-- Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
:root {
  --serra-red: #7a1419;
  --serra-dark: #4a0d10;
}

body {
  margin: 0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  background: linear-gradient(180deg, var(--serra-dark), var(--serra-red));
  color: white;
}

.container {
  max-width: 1000px;
  margin: auto;
  padding: 24px;
}

/* HEADER */
.header {
  display: grid;
  grid-template-columns: 320px 1fr;
  gap: 24px;
  align-items: center;
}

.player-img {
  width: 100%;
  aspect-ratio: 3 / 4;
  object-fit: cover;
  border-radius: 18px;
}

.name {
  font-size: 2.2rem;
  font-weight: 900;
}

.meta {
  font-size: 1.05rem;
  margin-top: 6px;
  opacity: .95;
}

.badges {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-top: 14px;
}

.badge {
  background: rgba(255,255,255,.18);
  padding: 8px 14px;
  border-radius: 18px;
  font-weight: 700;
  font-size: .9rem;
}

/* ACTIONS */
.actions {
  margin-top: 16px;
  display: flex;
  gap: 12px;
}

.btn {
  padding: 10px 18px;
  border-radius: 24px;
  font-weight: 800;
  text-decoration: none;
  font-size: .95rem;
}

.hudl {
  background: white;
  color: var(--serra-red);
}

.twitter {
  background: #1da1f2;
  color: white;
}

/* WRITEUP */
.section {
  margin-top: 32px;
  background: rgba(0,0,0,.35);
  padding: 24px;
  border-radius: 20px;
}

.section h2 {
  margin-bottom: 10px;
  font-size: 1.4rem;
  font-weight: 900;
}

.section p {
  font-size: 1.05rem;
  line-height: 1.6;
}

/* MOBILE */
@media (max-width: 800px) {
  .header {
    grid-template-columns: 1fr;
    text-align: center;
  }

  .actions {
    justify-content: center;
  }
}
</style>
</head>

<body>

<div class="container" id="profile"></div>

<script>
const CSV_URL = "PASTE_YOUR_CSV_LINK_HERE";
const params = new URLSearchParams(window.location.search);
const playerName = params.get("name");

fetch(CSV_URL)
  .then(res => res.text())
  .then(csv => {
    const rows = csv.split("\n");
    const headers = rows[0].split(",");

    const data = rows.slice(1).map(row => {
      const values = row.split(",");
      let obj = {};
      headers.forEach((h, i) => obj[h.trim()] = values[i] || "");
      return obj;
    });

    const p = data.find(r => r.Name === playerName);
    if (!p) return;

    document.getElementById("profile").innerHTML = `
      <div class="header">
        <img class="player-img" src="${p.ImageURL}" 
             onerror="this.src='images/placeholder_player.png'">

        <div>
          <div class="name">${p.Name}</div>
          <div class="meta">${p.Position} · ${p.HeightWeight}</div>
          <div class="meta">Class of ${p.Class} · GPA ${p.GPA}</div>

          <div class="badges">
            ${p.Offers ? `<div class="badge">Offers: ${p.Offers}</div>` : ""}
            ${p.Status ? `<div class="badge">Status: ${p.Status}</div>` : ""}
            ${p.College ? `<div class="badge">College: ${p.College}</div>` : ""}
          </div>

          <div class="actions">
            ${p.HUDL ? `<a class="btn hudl" href="${p.HUDL}" target="_blank">HUDL</a>` : ""}
            ${p.Twitter ? `<a class="btn twitter" href="${p.Twitter}" target="_blank">
              <i class="fa-brands fa-x-twitter"></i>
            </a>` : ""}
          </div>
        </div>
      </div>

      <div class="section">
        <h2>Player Evaluation</h2>
        <p>${p.Writeup}</p>
      </div>
    `;
  });
</script>

</body>
</html>