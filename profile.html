<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Serra Football Recruit Profile</title>

<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

<style>
body {
    margin: 0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial;
    background: linear-gradient(180deg, #4a0000, #7a0000);
    color: white;
}

/* NAV */
nav {
    background: rgba(0,0,0,.35);
    backdrop-filter: blur(6px);
    padding: 14px 20px;
    display: flex;
    align-items: center;
}
nav img {
    height: 42px;
    margin-right: 18px;
}
nav a {
    color: white;
    text-decoration: none;
    font-weight: 600;
    margin-right: 22px;
}

/* LAYOUT */
.container {
    max-width: 900px;
    margin: 0 auto;
    padding: 20px 16px 60px;
}

/* IMAGE */
.photo-box {
    width: 100%;
    max-width: 360px;
    margin: 0 auto 18px;
    border-radius: 20px;
    overflow: hidden;
    border: 1px solid rgba(255,255,255,.3);
}
.photo-box img {
    width: 100%;
    height: 420px;
    object-fit: cover;
    object-position: 50% 12%;
}

/* NAME */
h1 {
    font-size: 2rem;
    font-weight: 800;
    text-align: center;
    margin-bottom: 6px;
}
.sub {
    text-align: center;
    opacity: .9;
    margin-bottom: 16px;
}

/* STATS */
.stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px,1fr));
    gap: 12px;
    margin-bottom: 22px;
}
.stat {
    background: rgba(0,0,0,.35);
    border-radius: 16px;
    padding: 14px;
    text-align: center;
}
.stat strong {
    display: block;
    font-size: .8rem;
    opacity: .8;
}
.stat span {
    font-size: 1.1rem;
    font-weight: 700;
}

/* WRITEUP */
.section {
    background: rgba(0,0,0,.35);
    border-radius: 20px;
    padding: 18px;
    margin-bottom: 20px;
}
.section h2 {
    margin: 0 0 10px;
    font-size: 1.3rem;
}
.section p {
    line-height: 1.6;
    font-size: 1rem;
}

/* LINKS */
.links a {
    display: inline-block;
    margin-right: 14px;
    margin-top: 10px;
    padding: 10px 18px;
    border-radius: 999px;
    border: 1px solid white;
    color: white;
    font-weight: 600;
    text-decoration: none;
}
.links a:hover {
    background: white;
    color: #7a0000;
}

@media(min-width:768px){
    h1 { font-size: 2.3rem; }
}
</style>
</head>

<body>

<nav>
    <img src="images/serra_logo.png">
    <a href="index.html">Home</a>
    <a href="recruits.html">Recruits</a>
    <a href="transcript.html">Transcript / Transfer</a>
</nav>

<div class="container" id="profile"></div>

<script>
const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRZdfePIY8K8ag6AePllWRgYXhjJ-gJddB_8rDaJi3t5BAT11bHVK6m5cDsDQXg2PUIYPqHYcXyxbT2/pub?output=csv";
const params = new URLSearchParams(window.location.search);
const playerName = params.get("name");

fetch(CSV_URL)
.then(res => res.text())
.then(csv => {
    const data = Papa.parse(csv, { header: true }).data;
    const p = data.find(r => r.Name?.toLowerCase() === playerName?.toLowerCase());
    if (!p) return;

    document.getElementById("profile").innerHTML = `
        <div class="photo-box">
            <img src="${p.ImageURL || 'images/placeholder_player.png'}">
        </div>

        <h1>${p.Name}</h1>
        <div class="sub">${p.Position} â€¢ Class of ${p.Class}</div>

        <div class="stats">
            <div class="stat"><strong>Height / Weight</strong><span>${p.HeightWeight}</span></div>
            <div class="stat"><strong>GPA</strong><span>${p.GPA}</span></div>
            <div class="stat"><strong>Status</strong><span>${p.Status || 'Uncommitted'}</span></div>
        </div>

        <div class="section">
            <h2>Player Evaluation</h2>
            <p>${p.Writeup}</p>
        </div>

        <div class="links">
            ${p.HUDL ? `<a href="${p.HUDL}" target="_blank">HUDL Film</a>` : ''}
            ${p.Twitter ? `<a href="${p.Twitter}" target="_blank">Twitter / X</a>` : ''}
        </div>
    `;
});
</script>

</body>
</html>